{% load django_browser_reload %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - Collaboard</title>
    <link rel="stylesheet" href="{% static 'director/account.css' %}">
    <link rel="stylesheet" href="{% static 'navbar_user.css' %}">
</head>
<body>
    <!-- Navbar -->
    {% include 'navbar_user.html' %}

    <!-- Account Content -->
    <main class="account-main">
        <div class="container">
            <!-- Header Section -->
            <section class="account-header">
                <div class="header-content">
                    <div class="profile-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h1 class="account-title">My Account</h1>
                    <p class="account-subtitle">Manage your profile and account settings</p>
                </div>
            </section>

            <!-- Account Info Cards -->
            <section class="account-info">
                <div class="info-grid">
                    <!-- Account Details Card -->
                    <div class="info-card">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M20.59 22C20.59 18.13 16.74 15 12 15C7.26 15 3.41 18.13 3.41 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <h3 class="card-title">Account Details</h3>
                        </div>
                        <div class="card-content">
                            <div class="info-item">
                                <label class="info-label">Email Address</label>
                                <span class="info-value">{{ user.email }}</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Username</label>
                                <span class="info-value">{{ user.username }}</span>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Account Created</label>
                                <span class="info-value">{{ user.date_joined|date:"F d, Y" }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Stats Card -->
                    <div class="info-card">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <h3 class="card-title">Activity Stats</h3>
                        </div>
                        <div class="card-content">
                            <div class="stat-item">
                                <div class="stat-number">{{ meetings_created_count }}</div>
                                <div class="stat-label">Meetings Created</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">{{ total_participants }}</div>
                                <div class="stat-label">Total Participants</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">{{ total_responses }}</div>
                                <div class="stat-label">Responses Collected</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Action Section -->
            <section class="account-actions">
                <div class="actions-card">
                    <h3 class="actions-title">Account Actions</h3>
                    <div class="actions-grid">
                        <a href="{% url 'dashboard' %}" class="btn btn-primary">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M9 9L15 15M15 9L9 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Back to Dashboard
                        </a>
                        <button class="btn btn-danger" onclick="confirmDeleteAccount()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <polyline points="3,6 5,6 21,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Delete Account
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Delete Account</h4>
                <span class="close" onclick="closeDeleteModal()">&times;</span>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete your account? This action cannot be undone.</p>
                <p><strong>All your data will be permanently lost.</strong></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
                <form method="POST" action="{% url 'delete_account' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Delete Account</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        function confirmDeleteAccount() {
            document.getElementById('deleteModal').style.display = 'block';
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('deleteModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html>